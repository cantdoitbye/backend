<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed Algorithm Playground</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .card { margin-bottom: 20px; }
        .feed-item { margin-bottom: 15px; padding: 10px; border: 1px solid #eee; border-radius: 5px; }
        .progress { height: 10px; margin: 5px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Feed Algorithm Playground</h1>
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Parameters</h5>
                        <div class="mb-3">
                            <label class="form-label">User</label>
                            <select id="userSelect" class="form-select"></select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Feed Size: <span id="feedSizeValue">10</span></label>
                            <input type="range" class="form-range" id="feedSize" min="5" max="50" value="10">
                        </div>
                        <button id="generateBtn" class="btn btn-primary w-100">Generate Feed</button>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div id="feedContainer" class="feed-container">
                    <p class="text-muted">Click "Generate Feed" to see results</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const USERS = Array.from({length: 10}, (_, i) => ({
            id: i + 1,
            name: `User ${i + 1}`,
            interests: ['tech', 'sports', 'music', 'movies', 'gaming'].sort(() => 0.5 - Math.random()).slice(0, 3)
        }));

        const CONTENT = Array.from({length: 100}, (_, i) => ({
            id: i + 1,
            title: `Content ${i + 1}`,
            type: ['post', 'video', 'article'][Math.floor(Math.random() * 3)],
            tags: ['tech', 'sports', 'music', 'movies', 'gaming'].sort(() => 0.5 - Math.random()).slice(0, 2),
            score: Math.random().toFixed(2),
            author: USERS[Math.floor(Math.random() * USERS.length)]
        }));

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Populate user select
            const userSelect = document.getElementById('userSelect');
            USERS.forEach(user => {
                const option = document.createElement('option');
                option.value = user.id;
                option.textContent = user.name;
                userSelect.appendChild(option);
            });

            // Set up event listeners
            document.getElementById('generateBtn').addEventListener('click', generateFeed);
            document.getElementById('feedSize').addEventListener('input', (e) => {
                document.getElementById('feedSizeValue').textContent = e.target.value;
            });
        });

        // Generate feed
        function generateFeed() {
            const userId = parseInt(document.getElementById('userSelect').value);
            const feedSize = parseInt(document.getElementById('feedSize').value);
            const user = USERS.find(u => u.id === userId);
            
            // Simple scoring based on user interests
            const scoredContent = CONTENT.map(item => ({
                ...item,
                matchScore: item.tags.filter(tag => user.interests.includes(tag)).length
            })).sort((a, b) => b.matchScore - a.matchScore || b.score - a.score);
            
            // Get top items
            const feed = scoredContent.slice(0, feedSize);
            
            // Render feed
            renderFeed(feed, user);
        }

        // Render feed
        function renderFeed(feed, user) {
            const container = document.getElementById('feedContainer');
            container.innerHTML = `
                <h3>Feed for ${user.name}</h3>
                <p>Interests: ${user.interests.join(', ')}</p>
                <div class="feed-items">
                    ${feed.map(item => `
                        <div class="feed-item">
                            <h5>${item.title}</h5>
                            <div>Type: ${item.type} | Tags: ${item.tags.join(', ')}</div>
                            <div class="progress">
                                <div class="progress-bar" style="width: ${item.matchScore * 33}%"></div>
                            </div>
                            <small>Match: ${item.matchScore} | Score: ${item.score}</small>
                        </div>
                    `).join('')}
                </div>
            `;
        }
    </script>
</body>
</html>
